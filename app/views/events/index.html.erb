<!-- app/views/events/index.html.erb -->
<div class="container mx-auto mt-4">
  <h1 class="font-bold text-4xl mb-4">Events</h1>
  
  <% @events.each do |event| %>
    <div class="bg-white shadow-md rounded-md p-4 mb-4">
      <h2 class="text-xl font-semibold mb-2">Name: <%= event.name %></h2>
      <p class="text-gray-700 mb-2">Description:  <%= event.description %></p>
      <p class="text-gray-600 mb-2">Location: <%= event.location %></p>
      <p class="text-gray-600 mb-2">Date & Time: <%= event.date_and_time.strftime("%B %d, %Y %I:%M %p") %></p>
      <p class="text-gray-600">Available Tickets: <%= event.remaining_ticket %></p>

      <% if event.remaining_ticket.zero? %>
        <p class="text-red-500 mb-2">No tickets available anymore for this event.</p>
      <% elsif event.date_and_time < Time.now %>
        <p class="text-red-500 mb-2">Event is in the past</p>
      <% else %>
        <button data-controller="booking-form" data-action="click->booking-form#showForm" class="bg-blue-500 text-white px-4 py-2 rounded-md">Book Event</button>
        <div data-target="booking-form.form" class="hidden">
          <%#= render "bookings/form", event: event, url: new_event_booking_path(event_id: event.slug) %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
